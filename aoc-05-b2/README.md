# Day 5 (Part 2)
([AoC link](https://adventofcode.com/2023/day/5))
Okay, here is the more interesting solution for Part 2. Basically, the point of view here is that the maps in the problem are all piecewise linear functions with slope 1, so the composite of two such maps should also be one map with a similar description. Indeed, `compose` performs exactly that process; it is a little bit opaque, since I worked out the piecewise description of the composite function on paper before writing the function. It involves splitting up the ranges in the codomain of the first-applied function based on the ranges in the domain of the second-applied one (`expand`), which requires an analysis of how ranges intersect, which is a little more annoying than it sounds — for instance, if one range strictly contains the other, then the complement consists of multiple ranges — this is in `intersect`. 

With this procedure, we can turn our list of maps into one gigantic map directly. From there, the point is that the minima for the input ranges can only occur at critical points, which must be either boundary points of the map's domain ranges or left endpoints of the seed ranges (since the map is locally monotone on its components). This is in `crit_points`.